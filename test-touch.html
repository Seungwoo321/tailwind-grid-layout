<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Touch Event Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .test-area {
            width: 300px;
            height: 200px;
            background: linear-gradient(45deg, #3b82f6, #1d4ed8);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            margin: 20px 0;
            touch-action: none;
            user-select: none;
        }
        .log {
            background: #f3f4f6;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
        .draggable {
            position: relative;
            cursor: grab;
            transition: transform 0.2s;
        }
        .draggable:active {
            cursor: grabbing;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <h1>Touch Event Test</h1>
    <p>This page tests if touch events work in browser dev tools mobile simulation.</p>
    
    <div class="test-area draggable" id="testArea">
        Touch/Click Me!
    </div>
    
    <div class="log" id="log"></div>
    
    <button onclick="clearLog()">Clear Log</button>
    
    <script>
        const testArea = document.getElementById('testArea');
        const log = document.getElementById('log');
        
        function addLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            log.innerHTML += `[${timestamp}] ${message}<br>`;
            log.scrollTop = log.scrollHeight;
        }
        
        function clearLog() {
            log.innerHTML = '';
        }
        
        // Test all event types
        const events = [
            'mousedown', 'mousemove', 'mouseup',
            'touchstart', 'touchmove', 'touchend', 'touchcancel',
            'pointerdown', 'pointermove', 'pointerup'
        ];
        
        events.forEach(eventType => {
            testArea.addEventListener(eventType, (e) => {
                let eventInfo = `${eventType.toUpperCase()}`;
                
                if (e.type.startsWith('touch')) {
                    eventInfo += ` - touches: ${e.touches?.length || 0}, changed: ${e.changedTouches?.length || 0}`;
                    if (e.touches && e.touches[0]) {
                        eventInfo += ` - pos: (${Math.round(e.touches[0].clientX)}, ${Math.round(e.touches[0].clientY)})`;
                    }
                } else if (e.type.startsWith('mouse') || e.type.startsWith('pointer')) {
                    eventInfo += ` - pos: (${Math.round(e.clientX)}, ${Math.round(e.clientY)})`;
                }
                
                addLog(eventInfo);
                
                // Prevent default for touch events to test preventDefault
                if (e.type.startsWith('touch')) {
                    e.preventDefault();
                }
            }, { passive: false });
        });
        
        // Test drag functionality
        let isDragging = false;
        let startPos = { x: 0, y: 0 };
        let elementPos = { x: 0, y: 0 };
        
        function getEventPos(e) {
            if (e.touches && e.touches[0]) {
                return { x: e.touches[0].clientX, y: e.touches[0].clientY };
            }
            return { x: e.clientX, y: e.clientY };
        }
        
        function handleStart(e) {
            isDragging = true;
            const pos = getEventPos(e);
            startPos = pos;
            addLog(`üöÄ DRAG START at (${pos.x}, ${pos.y})`);
            testArea.style.cursor = 'grabbing';
        }
        
        function handleMove(e) {
            if (!isDragging) return;
            
            const pos = getEventPos(e);
            const deltaX = pos.x - startPos.x;
            const deltaY = pos.y - startPos.y;
            
            elementPos.x += deltaX;
            elementPos.y += deltaY;
            
            testArea.style.transform = `translate(${elementPos.x}px, ${elementPos.y}px) scale(1.05)`;
            startPos = pos;
            
            addLog(`üìç DRAG MOVE delta: (${deltaX}, ${deltaY})`);
        }
        
        function handleEnd(e) {
            if (!isDragging) return;
            
            isDragging = false;
            testArea.style.cursor = 'grab';
            testArea.style.transform = `translate(${elementPos.x}px, ${elementPos.y}px)`;
            
            addLog(`üèÅ DRAG END`);
        }
        
        // Add drag event listeners
        testArea.addEventListener('mousedown', handleStart);
        testArea.addEventListener('touchstart', handleStart);
        
        document.addEventListener('mousemove', handleMove);
        document.addEventListener('touchmove', handleMove, { passive: false });
        
        document.addEventListener('mouseup', handleEnd);
        document.addEventListener('touchend', handleEnd);
        document.addEventListener('touchcancel', handleEnd);
        
        addLog('üî• Touch event test initialized');
    </script>
</body>
</html>